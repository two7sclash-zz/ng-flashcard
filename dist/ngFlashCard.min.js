/*! ngFlashCard 2016-07-13 */
angular.module("ngFlashCard",["ngSanitize"]).directive("flashCardSet",[function(){return{scope:{cardGroups:"="},controller:["$scope",function(a){a.selectedGroups=[],a.activeGroup=0,a.activeCard=0,a.shuffle=!1,a.backFirst=!1;var b=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},c=function(){var c=b(0,a.selectedGroups.length-1),d=c;do d++,d>a.selectedGroups.length-1&&(d=0);while(a.selectedGroups[d]===!1&&d!==c);a.selectedGroups[d]!==!1&&(a.activeGroup=d,a.activeCard=b(0,a.cardGroups[d].cards.length-1))},d=function(){a.activeGroup--,a.activeGroup<0&&(a.activeGroup=a.cardGroups.length-1)},e=function(){var b=a.activeGroup;if(a.activeCard--,a.activeCard<0){for(d();a.selectedGroups[a.activeGroup]===!1&&(d(),a.activeGroup!==b););a.activeCard=a.cardGroups[a.activeGroup].cards.length-1}};a.previous=function(){a.shuffle?c():e()};var f=function(){a.activeGroup++,a.activeGroup>=a.cardGroups.length&&(a.activeGroup=0)},g=function(b){var c=a.activeGroup;if(a.activeCard++,b||a.activeCard>=a.cardGroups[a.activeGroup].cards.length)for(a.activeCard=0,f();a.selectedGroups[a.activeGroup]===!1&&(f(),a.activeGroup!==c););};a.next=function(b){a.shuffle?c():g(b)},a.$watch("selectedGroups",function(a,b,c){for(var d=0;d<a.length;d++)a[d]===!1&&c.activeGroup===d&&c.next(!0)},!0),a.showFront=function(b){return b?a.backFirst:!a.backFirst}}],template:'<div class="container-fluid ngFlashCard-cardSet ngFlashCard-fullHeight"><div class="row ngFlashCard-fullHeight"><ul class="ngFlashCard-groupSelector col-sm-3 list-group"><li ng-repeat="cardGroup in cardGroups" class="list-group-item ngFlashCard-clickable" ng-init="selectedGroups[$index] = true" ng-click="selectedGroups[$index] = !selectedGroups[$index]"><input class="ngFlashCard-clickable" type="checkbox" ng-checked="selectedGroups[$index]" />{{cardGroup.name}}</li></ul><div class="well well-sm text-center col-sm-9 ngFlashCard-fullHeight ngFlashCard-wrapper"><div class="ngFlashCard-cardHeader"><div class="ngFlashCard-pageButton" ng-click="previous()" >Previous</div><div class="ngFlashCard-clickable ngFlashCard-backFirst"><div ng-click="backFirst = !backFirst"><input class="ngFlashCard-clickable" type="checkbox" ng-checked="backFirst">Answers First</div><div ng-click="shuffle = !shuffle"><input class="ngFlashCard-clickable" type="checkbox" ng-checked="shuffle">Shuffle</div></div><div class="ngFlashCard-pageButton" ng-click="next()" >Next</div></div><div class="ngFlashCard-cardGroup" ng-repeat="cardGroup in cardGroups" ng-if="selectedGroups[$index] && activeGroup === $index"><div class="ngFlashCard-fullHeight" ng-repeat="card in cardGroup.cards" ng-if="activeCard === $index"><div class="ngFlashCard-card ngFlashCard-fullHeight"ng-class="showFront(flipped) ? \'ngFlashCard-cardFront\' : \'ngFlashCard-cardBack\'"ng-click="flipped = !flipped" ng-init="flipped=false"><h1 ng-bind-html="showFront(flipped) ? card.front : card.back"></h1></div></div></div><span>{{cardGroups[activeGroup].name}}</span></div></div></div>'}}]);